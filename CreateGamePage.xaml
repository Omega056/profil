<Page x:Class="WpfApp14.CreateGamePage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      Title="Создать игру">
    <Page.Background>
        <SolidColorBrush Color="Wheat"/>
    </Page.Background>

    <Page.Resources>
        <!-- Тень для кнопок -->
        <DropShadowEffect x:Key="ButtonShadow" ShadowDepth="4" BlurRadius="10" Color="#888888" Opacity="0.5"/>

        <!-- Эффект стекла -->
        <BlurEffect x:Key="GlassEffect" Radius="10"/>

        <!-- Прозрачные скруглённые кнопки -->
        <Style TargetType="Button" x:Key="RoundedButton">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="BorderBrush" Value="#DDDDDD"/>
            <Setter Property="BorderThickness" Value="2"/>
            <Setter Property="Padding" Value="10,5"/>
            <Setter Property="Foreground" Value="#333333"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}"
                                CornerRadius="20"
                                Effect="{StaticResource ButtonShadow}">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <Style TargetType="Button" x:Key="LargeRoundedButton" BasedOn="{StaticResource RoundedButton}">
            <Setter Property="Height" Value="55"/>
            <Setter Property="FontSize" Value="16"/>
            <Setter Property="FontWeight" Value="Bold"/>
        </Style>

        <!-- Стиль для прозрачных скруглённых текстовых полей с красной обводкой -->
        <Style TargetType="TextBox" x:Key="RoundedTransparentTextBox">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="BorderBrush" Value="#FF0000"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="TextBox">
                        <Border Background="{TemplateBinding Background}"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}"
                                CornerRadius="10">
                            <ScrollViewer x:Name="PART_ContentHost"/>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- Стиль для ComboBox, стилизованный как кнопка -->
        <Style TargetType="ComboBox" x:Key="ButtonStyledComboBox">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="BorderBrush" Value="#DDDDDD"/>
            <Setter Property="BorderThickness" Value="2"/>
            <Setter Property="Foreground" Value="#333333"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Padding" Value="10,5"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="ComboBox">
                        <Border Background="{TemplateBinding Background}"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}"
                                CornerRadius="20"
                                Effect="{StaticResource ButtonShadow}">
                            <Grid>
                                <ToggleButton x:Name="ToggleButton"
                                            IsChecked="{Binding IsDropDownOpen, Mode=TwoWay, RelativeSource={RelativeSource TemplatedParent}}"
                                            Background="Transparent"
                                            BorderBrush="Transparent"
                                            BorderThickness="0"/>
                                <ContentPresenter x:Name="ContentSite"
                                                IsHitTestVisible="False"
                                                Content="{TemplateBinding SelectionBoxItem}"
                                                ContentTemplate="{TemplateBinding SelectionBoxItemTemplate}"
                                                ContentTemplateSelector="{TemplateBinding ItemTemplateSelector}"
                                                Margin="10,5"
                                                VerticalAlignment="Center"
                                                HorizontalAlignment="Left"/>
                                <TextBox x:Name="PART_EditableTextBox"
                                        Style="{StaticResource RoundedTransparentTextBox}"
                                        Visibility="Hidden"
                                        IsReadOnly="{TemplateBinding IsReadOnly}"/>
                                <Popup x:Name="PART_Popup"
                                    IsOpen="{TemplateBinding IsDropDownOpen}"
                                    Placement="Bottom"
                                    AllowsTransparency="True"
                                    Focusable="False"
                                    PopupAnimation="Slide">
                                    <Grid MaxHeight="{TemplateBinding MaxDropDownHeight}"
                                        MinWidth="{TemplateBinding ActualWidth}"
                                        Background="Transparent">
                                        <Border x:Name="DropDownBorder"
                                                Background="Transparent"
                                                BorderBrush="#DDDDDD"
                                                BorderThickness="2"
                                                CornerRadius="5"/>
                                        <ScrollViewer Margin="4,6,4,6"
                                                    Background="Transparent">
                                            <ItemsPresenter KeyboardNavigation.DirectionalNavigation="Contained"/>
                                        </ScrollViewer>
                                    </Grid>
                                </Popup>
                            </Grid>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </Page.Resources>

    <DockPanel Margin="20">
        <!-- Назад -->
        <Button Content="← Назад"
                Style="{StaticResource RoundedButton}"
                Width="100"
                Click="BackButton_Click"
                Margin="0,0,0,10"/>

        <ScrollViewer VerticalScrollBarVisibility="Auto">
            <StackPanel>
                <Border Background="#D2B48C" CornerRadius="20" Padding="20" Opacity="0.9" Margin="0,0,0,20" Effect="{StaticResource ButtonShadow}">
                    <StackPanel>
                        <TextBlock Text="Название викторины:" FontSize="16" FontWeight="SemiBold"/>
                        <TextBox x:Name="QuizTitleBox" Height="35" Margin="0,5,0,20" Style="{StaticResource RoundedTransparentTextBox}"/>

                        <TextBlock Text="Количество вопросов:" FontSize="16" FontWeight="SemiBold"/>
                        <ComboBox x:Name="QuestionsCountCombo" Width="80" SelectedIndex="4"
                                  SelectionChanged="QuestionsCountCombo_SelectionChanged" Margin="0,5,0,20"
                                  Style="{StaticResource ButtonStyledComboBox}">
                            <ComboBoxItem>1</ComboBoxItem>
                            <ComboBoxItem>2</ComboBoxItem>
                            <ComboBoxItem>3</ComboBoxItem>
                            <ComboBoxItem>4</ComboBoxItem>
                            <ComboBoxItem>5</ComboBoxItem>
                            <ComboBoxItem>6</ComboBoxItem>
                            <ComboBoxItem>7</ComboBoxItem>
                            <ComboBoxItem>8</ComboBoxItem>
                            <ComboBoxItem>9</ComboBoxItem>
                            <ComboBoxItem>10</ComboBoxItem>
                            <ComboBoxItem>11</ComboBoxItem>
                            <ComboBoxItem>12</ComboBoxItem>
                            <ComboBoxItem>13</ComboBoxItem>
                            <ComboBoxItem>14</ComboBoxItem>
                            <ComboBoxItem>15</ComboBoxItem>
                        </ComboBox>
                    </StackPanel>
                </Border>

                <ItemsControl x:Name="QuestionsItemsControl" ItemsSource="{Binding Questions}">
                    <ItemsControl.ItemTemplate>
                        <DataTemplate>
                            <Border Background="#D2B48C" CornerRadius="15" Padding="15" Margin="0,0,0,20" Opacity="0.9" Effect="{StaticResource ButtonShadow}">
                                <StackPanel>
                                    <TextBlock Text="{Binding QuestionHeader}" FontWeight="Bold" FontSize="16"/>
                                    <TextBox Text="{Binding QuestionText, UpdateSourceTrigger=PropertyChanged}" Margin="0,5" Style="{StaticResource RoundedTransparentTextBox}"/>

                                    <ItemsControl ItemsSource="{Binding Answers}">
                                        <ItemsControl.ItemTemplate>
                                            <DataTemplate>
                                                <StackPanel Orientation="Horizontal" Margin="0,5,0,0">
                                                    <RadioButton IsChecked="{Binding IsCorrect}" GroupName="{Binding GroupName}" Margin="0,0,5,0"/>
                                                    <TextBox Text="{Binding Text, UpdateSourceTrigger=PropertyChanged}" Width="250" Style="{StaticResource RoundedTransparentTextBox}"/>
                                                </StackPanel>
                                            </DataTemplate>
                                        </ItemsControl.ItemTemplate>
                                    </ItemsControl>

                                    <StackPanel Orientation="Horizontal" Margin="0,10,0,0">
                                        <TextBlock Text="Таймер:" Width="60"/>
                                        <ComboBox SelectedIndex="{Binding SelectedTimerIndex}" Width="100" Style="{StaticResource ButtonStyledComboBox}">
                                            <ComboBoxItem>10 сек</ComboBoxItem>
                                            <ComboBoxItem>20 сек</ComboBoxItem>
                                            <ComboBoxItem>30 сек</ComboBoxItem>
                                        </ComboBox>
                                    </StackPanel>
                                </StackPanel>
                            </Border>
                        </DataTemplate>
                    </ItemsControl.ItemTemplate>
                </ItemsControl>

                <Button Content="Добавить викторину"
                        Style="{StaticResource LargeRoundedButton}"
                        Click="AddQuizButton_Click"
                        Margin="0,10"
                        HorizontalAlignment="Center"/>
            </StackPanel>
        </ScrollViewer>
    </DockPanel>
</Page>